const express=require("express"),path=require("path"),router=express.Router(),passport=require("passport"),csurf=require("csurf"),projectRoot=path.join(__dirname,"../..");router.use("/static",express.static(path.join(projectRoot,"/views/backend"))),router.use(csurf()),router.use(((req,res,next)=>{res.locals.csrfToken=req.csrfToken(),next()})),router.get("/",((req,res)=>{res.render("./backend/pages/login",{layout:"backend/layout/login",title:"login"})})),router.post("/login",((req,res)=>{console.log("hello",req.body);var test=passport.authenticate("local",{successRedirect:"../modules/",failureRedirect:"./",failureFlash:!0});console.log(test)})),router.post("/logout",((req,res,next)=>{req.logout((err=>{if(err)return next(err);res.redirect("/edit")}))})),module.exports=router;